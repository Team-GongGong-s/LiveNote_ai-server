# REC (Recommend) ì‹œìŠ¤í…œ ì „ì²´ ê°€ì´ë“œ

## ğŸ“š ê°œìš”

**LiveNote REC ì‹œìŠ¤í…œ**ì€ ê°•ì˜ ë‚´ìš©ì— ë§ëŠ” ì¶”ì²œ ìë£Œë¥¼ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**4ê°€ì§€ Provider:**
1. **OpenAlex**: í•™ìˆ  ë…¼ë¬¸ ì¶”ì²œ
2. **YouTube**: êµìœ¡ ì˜ìƒ ì¶”ì²œ
3. **Google**: ì›¹ ìë£Œ ì¶”ì²œ
4. **Wikipedia**: ë°±ê³¼ì‚¬ì „ ë¬¸ì„œ ì¶”ì²œ

---

## ğŸ”„ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FastAPI Server                           â”‚
â”‚                    (server/routes/rec.py)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      POST /rec/recommend               â”‚
        â”‚      {                                 â”‚
        â”‚        "lecture_id": "...",            â”‚
        â”‚        "section_id": "...",            â”‚
        â”‚        "section_summary": "...",       â”‚
        â”‚        "providers": ["openalex", ...]  â”‚
        â”‚      }                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                 â”‚
                â–¼                                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ë³‘ë ¬ Provider   â”‚               â”‚   ì„¤ì • ë¡œë“œ      â”‚
    â”‚   í˜¸ì¶œ (asyncio) â”‚               â”‚  (server/config) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚OpenAlexâ”‚ â”‚YouTube â”‚ â”‚ Google â”‚ â”‚  Wiki  â”‚
â”‚ Serviceâ”‚ â”‚ Serviceâ”‚ â”‚ Serviceâ”‚ â”‚ Serviceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.ì¿¼ë¦¬ â”‚ â”‚ 1.ì¿¼ë¦¬ â”‚ â”‚ 1.ì¿¼ë¦¬ â”‚ â”‚ 1.ì¿¼ë¦¬ â”‚
â”‚  ìƒì„±  â”‚ â”‚  ìƒì„±  â”‚ â”‚  ìƒì„±  â”‚ â”‚  ìƒì„±  â”‚
â”‚ (LLM)  â”‚ â”‚ (LLM)  â”‚ â”‚ (LLM)  â”‚ â”‚ (LLM)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.ê²€ìƒ‰ â”‚ â”‚ 2.ê²€ìƒ‰ â”‚ â”‚ 2.ê²€ìƒ‰ â”‚ â”‚ 2.ê²€ìƒ‰ â”‚
â”‚ (API)  â”‚ â”‚ (API)  â”‚ â”‚ (API)  â”‚ â”‚ (API)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.ì¶”ì¶œ â”‚ â”‚ 3.ì¶”ì¶œ â”‚ â”‚ 3.ì¶”ì¶œ â”‚ â”‚ 3.ì¶”ì¶œ â”‚
â”‚ (íŒŒì‹±) â”‚ â”‚(ìë§‰)  â”‚ â”‚(ë³¸ë¬¸)  â”‚ â”‚(ë³¸ë¬¸)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4.ê²€ì¦ â”‚ â”‚ 4.ê²€ì¦ â”‚ â”‚ 4.ê²€ì¦ â”‚ â”‚ 4.ê²€ì¦ â”‚
â”‚ (LLM)  â”‚ â”‚ (LLM)  â”‚ â”‚ (LLM)  â”‚ â”‚ (LLM)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  5. ê²°ê³¼ ë³‘í•© + ë°˜í™˜       â”‚
        â”‚  {                         â”‚
        â”‚    "openalex": [...],      â”‚
        â”‚    "youtube": [...],       â”‚
        â”‚    "google": [...],        â”‚
        â”‚    "wiki": [...]           â”‚
        â”‚  }                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ ì„¤ì • ë°©ë²• (ê°„ë‹¨ ê°€ì´ë“œ)

### **1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)**

```bash
# OpenAI API (ì „ì²´ Provider ê³µí†µ)
OPENAI_API_KEY=sk-...

# YouTube Provider
YOUTUBE_API_KEY=AIza...

# Google Provider
GOOGLE_API_KEY=AIza...
GOOGLE_CSE_ID=12345...

# RAG (Vector DB)
RAG_PERSIST_DIR=server_storage/chroma_data
```

### **2. ì„œë²„ ì„¤ì • (server/config.py)**

```python
class OpenAlexSettings(BaseModel):
    """OpenAlex Provider ì„¤ì •"""
    top_k: int = Field(default=3)           # ë°˜í™˜í•  ë…¼ë¬¸ ìˆ˜
    verify: bool = Field(default=True)      # LLM ê²€ì¦ ON/OFF
    year_from: int = Field(default=1930)    # ë…¼ë¬¸ ì¶œíŒ ë…„ë„
    min_score: float = Field(default=0.0)   # ìµœì†Œ ì ìˆ˜
    sort_by: str = Field(default="relevance")  # ì •ë ¬ ë°©ì‹

class YouTubeSettings(BaseModel):
    """YouTube Provider ì„¤ì •"""
    top_k: int = Field(default=3)           # ë°˜í™˜í•  ì˜ìƒ ìˆ˜
    verify: bool = Field(default=True)      # LLM ê²€ì¦ ON/OFF
    min_score: float = Field(default=0.0)   # ìµœì†Œ ì ìˆ˜
    yt_lang: str = Field(default="ko")      # ì˜ìƒ ì–¸ì–´

class GoogleSettings(BaseModel):
    """Google Provider ì„¤ì •"""
    top_k: int = Field(default=3)           # ë°˜í™˜í•  ê²€ìƒ‰ ê²°ê³¼ ìˆ˜
    verify: bool = Field(default=True)      # LLM ê²€ì¦ ON/OFF
    min_score: float = Field(default=0.0)   # ìµœì†Œ ì ìˆ˜

class WikiSettings(BaseModel):
    """Wikipedia Provider ì„¤ì •"""
    top_k: int = Field(default=3)           # ë°˜í™˜í•  ë¬¸ì„œ ìˆ˜
    verify: bool = Field(default=True)      # LLM ê²€ì¦ ON/OFF
    min_score: float = Field(default=0.0)   # ìµœì†Œ ì ìˆ˜
    wiki_lang: str = Field(default="ko")    # Wikipedia ì–¸ì–´
```

### **3. ëª¨ë“ˆë³„ ì„¤ì • (ê° Providerì˜ config.py)**

#### **OpenAlex**
```python
# cap1_openalex_module/openalexkit/config/openalex_config.py
class OpenAlexConfig:
    LLM_MODEL: str = "gpt-4o"
    LLM_TEMPERATURE: float = 0.2
    VERIFY_CONCURRENCY: int = 20  # ë³‘ë ¬ ê²€ì¦ ë™ì‹œì„±
    TOKEN_MIN: int = 2
    TOKEN_MAX: int = 3
```

#### **YouTube**
```python
# cap1_youtube_module/youtubekit/config/youtube_config.py
class YouTubeConfig:
    LLM_MODEL: str = "gpt-4o"
    LLM_TEMPERATURE: float = 0.2
    VERIFY_CONCURRENCY: int = 20
```

#### **Google**
```python
# cap1_google_module/googlekit/config/google_config.py
class GoogleConfig:
    LLM_MODEL: str = "gpt-4o"
    LLM_TEMPERATURE: float = 0.2
    VERIFY_CONCURRENCY: int = 20
```

#### **Wikipedia**
```python
# cap1_wiki_module/wikikit/config/wiki_config.py
class WikiConfig:
    LLM_MODEL: str = "gpt-4o"
    LLM_TEMPERATURE: float = 0.2
    VERIFY_CONCURRENCY: int = 20
```

### **4. Flags ì„¤ì • (ê° Providerì˜ flags.py)**

```python
# NO_SCORING ëª¨ë“œ (ê²€ì¦ ìŠ¤í‚µ)
NO_SCORING = False  # True: ê²€ì¦ ìŠ¤í‚µ, False: ê²€ì¦ ì‹¤í–‰

# ì¿¼ë¦¬ ìƒì„± ì œí•œ
QUERY_MAX = 3       # ìµœëŒ€ ì¿¼ë¦¬ ìˆ˜
MAX_SEARCH_RESULTS = 10  # ì¿¼ë¦¬ë‹¹ ìµœëŒ€ ê²€ìƒ‰ ê²°ê³¼

# OpenAlex ì „ìš©
TOKEN_MIN = 2       # ìµœì†Œ í† í° ìˆ˜
TOKEN_MAX = 3       # ìµœëŒ€ í† í° ìˆ˜
```

---

## ğŸ“Š Provider ë¹„êµ

| Provider | ê²€ìƒ‰ ëŒ€ìƒ | API | íŠ¹ì§• | ì¥ì  | ë‹¨ì  |
|----------|-----------|-----|------|------|------|
| **OpenAlex** | í•™ìˆ  ë…¼ë¬¸ | OpenAlex API | TOKEN ê¸°ë°˜ ê²€ìƒ‰ | ì •í™•í•œ í•™ìˆ  ìë£Œ | ê²€ìƒ‰ ê²°ê³¼ ì ì„ ìˆ˜ ìˆìŒ |
| **YouTube** | êµìœ¡ ì˜ìƒ | YouTube Data API | Transcript ì¶”ì¶œ | ì‹œê°ì  í•™ìŠµ ìë£Œ | ìë§‰ ì—†ìœ¼ë©´ ì œì™¸ |
| **Google** | ì›¹ ìë£Œ | Google Custom Search | ë³¸ë¬¸ ì¶”ì¶œ | ë‹¤ì–‘í•œ ìë£Œ | ë³¸ë¬¸ ì¶”ì¶œ ì‹¤íŒ¨ ê°€ëŠ¥ |
| **Wikipedia** | ë°±ê³¼ì‚¬ì „ | Wikipedia API | ë‹¤êµ­ì–´ ì§€ì› | ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì •ë³´ | ì¼ë¶€ ì£¼ì œ ë¬¸ì„œ ì—†ìŒ |

---

## ğŸ” ê³µí†µ ë™ì‘ íë¦„

ëª¨ë“  ProviderëŠ” **5ë‹¨ê³„ ê³µí†µ íë¦„**ì„ ë”°ë¦…ë‹ˆë‹¤:

```
1. ì¿¼ë¦¬ ìƒì„± (LLM)
   â†“
2. ê²€ìƒ‰ (API, ë³‘ë ¬)
   â†“
3. ì¶”ì¶œ (ë³¸ë¬¸/ìë§‰)
   â†“
4. ê²€ì¦ (LLM ë˜ëŠ” Heuristic)
   â†“
5. ë°˜í™˜ (ì ìˆ˜ í•„í„°ë§ + ì •ë ¬)
```

### **1ë‹¨ê³„: ì¿¼ë¦¬ ìƒì„± (LLM)**
- ê°•ì˜ ìš”ì•½ â†’ LLM â†’ ê²€ìƒ‰ ì¿¼ë¦¬ ìƒì„±
- ìµœëŒ€ 3ê°œ ì¿¼ë¦¬ (QUERY_MAX=3)
- OpenAlexë§Œ TOKEN ë°©ì‹ (2-3ê°œ)

### **2ë‹¨ê³„: ê²€ìƒ‰ (API, ë³‘ë ¬)**
- ê° ì¿¼ë¦¬ë¡œ API í˜¸ì¶œ (ë³‘ë ¬ ì‹¤í–‰)
- ì¤‘ë³µ ì œê±° (ì œëª©/URL ì •ê·œí™”)
- exclude í•„í„°ë§

### **3ë‹¨ê³„: ì¶”ì¶œ**
- **OpenAlex**: ì´ˆë¡ ì—­ìƒ‰ì¸ â†’ í…ìŠ¤íŠ¸
- **YouTube**: youtube-transcript-apië¡œ ìë§‰
- **Google**: Trafilaturaë¡œ ë³¸ë¬¸
- **Wikipedia**: Wikipedia APIë¡œ ë³¸ë¬¸

### **4ë‹¨ê³„: ê²€ì¦**
- **LLM ê²€ì¦** (verify=True): GPT-4oë¡œ ì •í™•í•œ í‰ê°€
- **Heuristic ìŠ¤ì½”ì–´ë§** (verify=False): í‚¤ì›Œë“œ ë§¤ì¹­ìœ¼ë¡œ ë¹ ë¥¸ í‰ê°€
- **NO_SCORING ëª¨ë“œ**: ê²€ì¦ ìŠ¤í‚µ (í…ŒìŠ¤íŠ¸ìš©)

### **5ë‹¨ê³„: ë°˜í™˜**
- min_score ì´ìƒë§Œ ì„ íƒ
- ì ìˆ˜ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
- top_kê°œ ë°˜í™˜

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### **1. ì„œë²„ ì‹¤í–‰**
```bash
uvicorn server.main:app --reload
```

### **2. API í˜¸ì¶œ**
```bash
curl -X POST "http://localhost:8000/rec/recommend" \
  -H "Content-Type: application/json" \
  -d '{
    "lecture_id": "lecture_1",
    "section_id": "section_3",
    "section_summary": "ì´ ì„¹ì…˜ì—ì„œëŠ” Backpropagation ì•Œê³ ë¦¬ì¦˜ì„ ì„¤ëª…í•©ë‹ˆë‹¤.",
    "providers": ["openalex", "youtube", "google", "wiki"],
    "previous_summaries": [],
    "rag_context": []
  }'
```

### **3. ì‘ë‹µ í™•ì¸**
```json
{
  "openalex": [
    {
      "lecture_id": "lecture_1",
      "section_id": "section_3",
      "paper_info": {
        "title": "Efficient BackProp",
        "authors": ["Yann LeCun", ...],
        "year": 2012,
        "citations": 15234,
        "url": "https://doi.org/..."
      },
      "reason": "Backpropagation ì•Œê³ ë¦¬ì¦˜ì˜ íš¨ìœ¨ì  êµ¬í˜„ì„ ë‹¤ë£¬ í•µì‹¬ ë…¼ë¬¸",
      "score": 9.0
    }
  ],
  "youtube": [...],
  "google": [...],
  "wiki": [...]
}
```

---

## ğŸ“ ìƒì„¸ ë¬¸ì„œ

ê° Providerë³„ ìƒì„¸ ë™ì‘ ê³¼ì •ì€ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”:

- [OpenAlex ë™ì‘ ê³¼ì •](./REC_OPENALEX_ë™ì‘ê³¼ì •.md)
- [YouTube ë™ì‘ ê³¼ì •](./REC_YOUTUBE_ë™ì‘ê³¼ì •.md)
- [Google ë™ì‘ ê³¼ì •](./REC_GOOGLE_ë™ì‘ê³¼ì •.md)
- [Wikipedia ë™ì‘ ê³¼ì •](./REC_WIKI_ë™ì‘ê³¼ì •.md)

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### **ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”**
1. ë¡œê·¸ í™•ì¸: ì¿¼ë¦¬ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€
2. API í‚¤ í™•ì¸: .env íŒŒì¼ í™•ì¸
3. ì„¤ì • ì¡°ì •:
   - `year_from=2015` (OpenAlex)
   - `yt_lang="en"` (YouTube)
   - `QUERY_MAX=5` (ì¿¼ë¦¬ ìˆ˜ ì¦ê°€)

### **JSON íŒŒì‹± ì˜¤ë¥˜ (OpenAlex)**
- `MAX_TOKENS_SCORE=200` (120â†’200 ì¦ê°€)
- í”„ë¡¬í”„íŠ¸ ê°œì„ : "reasonì€ 50ì ì´ë‚´"

### **ë³‘ë ¬ ì²˜ë¦¬ê°€ ëŠë ¤ìš”**
- `VERIFY_CONCURRENCY=20` (ë™ì‹œì„± ì¦ê°€)
- `NO_SCORING=True` (ê²€ì¦ ìŠ¤í‚µ, í…ŒìŠ¤íŠ¸ìš©)

---

**ì‘ì„±ì¼:** 2025ë…„ 11ì›” 14ì¼  
**ë²„ì „:** 1.0  
**ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°:**
- **FastAPI ì„œë²„**: `server/main.py`, `server/routes/rec.py`
- **4ê°œ Provider**: OpenAlex, YouTube, Google, Wikipedia
- **ê³µí†µ ì„¤ì •**: `server/config.py`
- **ëª¨ë“ˆë³„ ì„¤ì •**: ê° Providerì˜ `config/` ë””ë ‰í† ë¦¬
